---
- name: Pull Docker Image of Backend
  hosts: localhost
  vars:
    ansible_python_interpreter: /usr/bin/python3
  tasks:
    - name: Pull image
      docker_image:
        name: rithvikramasani/bloggeditbackend:latest
        source: pull

    - name: Ensure Docker service is started
      service:
        name: docker
        state: started

    - name: Remove existing container if exists
      docker_container:
        name: Backend
        state: absent
      ignore_errors: yes

    - name: Running container
      docker_container:
        name: Backend
        image: rithvikramasani/bloggeditbackend:latest
        state: started
